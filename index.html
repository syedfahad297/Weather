<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Weather UI</title>
	<link rel="stylesheet" href="./assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="./assets/css/style.css">
</head>

<body>
	<div class="weather-card">
		<div class="inputBox">
			<input type="text" class="form-control" id="cityName" placeholder="Write your city" />


			<div class="d-flex gap-4">
				
				<div><button id="btn" class="d-flex btn btn-warning">Check Weather </button></div>
				<div>
					<div class="spinner-border p-2 text-danger d-none" role="status" id="spinner">
						<span class="visually-hidden">Loading...</span>
					</div>
				</div>
			</div>


		</div>
		<div class="weather-top">
			<div class="day-time">
				<p id="name">-</p>
				<span id="region">-</span>
				<span id="country">-</span>
			</div>
			<div class="main-weather">
				<h1 id="temp_c">0°C</h1>
				<p class="condition_text">-</p>
			</div>
			<div class="weather-icon">
				<img class="weatherIcon" src="https://cdn.weatherapi.com/weather/64x64/day/116.png" />
			</div>
		</div>

		<div class="weather-details">
			<div class="detail-box">
				<p>Wind</p>
				<span class="windSpeed">0 k/hp</span>
			</div>
			<div class="detail-box">
				<p>Real Feel</p>
				<span id="realFeel">0°C</span>
			</div>
			<div class="detail-box">
				<p>Humidity</p>
				<span class="humidity">0%</span>
			</div>
		</div>
	</div>
	<script src="./assets/js/bootstrap.bundle.min.js"></script>
	<script>
		let cityNameInput = document.getElementById("cityName");
		let btn = document.getElementById("btn");
		let temp_c = document.getElementById("temp_c");
		let realFeel = document.getElementById("realFeel");
		let windSpeed = document.querySelector(".windSpeed");
		let humidity = document.querySelector(".humidity");
		let weatherIcon = document.querySelector(".weatherIcon");
		let spinner = document.getElementById("spinner");
		let name = document.getElementById("name");
		let region = document.getElementById("region");
		let country = document.getElementById("country");


		btn.addEventListener("click", function () {
			Weather();

		});
		cityNameInput.addEventListener("keyup", function (event) {
			if (event.key == "Enter") {
				Weather();
			}
		});

		function Weather() {
			spinner.classList.remove("d-none");
			let cityName = cityNameInput.value;

			fetch(`http://api.weatherapi.com/v1/current.json?key=7b8f2704e4e246cabe050602252605&q=${cityName}&aqi=no`)
				.then(function (res) {
					return res.json();

				}).then(function (data) {
					// console.log(data);
					temp_c.innerText = data.current.temp_c + "°C";
					name.innerText = data.location.name;
					region.innerText = data.location.region;
					country.innerText = data.location.country;
					realFeel.innerText = data.current.feelslike_c;
					windSpeed.innerText = data.current.wind_kph + " km/h";
					humidity.innerText = data.current.humidity + "%";
					weatherIcon.src = data.current.condition.icon;
					document.querySelector(".condition_text").innerText = data.current.condition.text;


				}).catch(function (er) {
					console.log(er)
					alert("City not found");

				}).finally(function () {
					alert("always run")
					spinner.classList.add("d-none");
				})

			cityNameInput.value = "";
		};

	</script>
</body>

</html>